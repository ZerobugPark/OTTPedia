# ProjectName: OTTPdeia

## 목차
1. Application 소개
2. 주요 기능
3. 기술 수택
4. 기술 설명
5. 트러블 슈팅

***

## Application 소개
OTTPedia는'TV 서비스(Over the Top)'와 백과사전(encyclopedia)을 합성한 말로, 사용자에게 <b>"지금 가장 인기있는 영화 Top20을 기본"</b>으로, 영화 검색의 기능을 함께 갖춘, 프리미엄 OTT 검색 서비스입니다.

***

## 프로젝트 기간
2025.01.24 ~ 2025.02.01(9일간)

***

### 주요 기능
1. 지금 가장 인기있는 영화 Top20
2. 영화 검색 기능
3. 최근 검색어 저장 기능
4. 프로필 설정 기능
5. 좋아요 기능

***
### 기술 스택
- FrameWork - UIKit  
- Library - Alamofire, Kingfisher, SnapKit

***
### 기술 설명
프로젝트에 대한 기술에 앞서 본 프로젝트에서 가장 중요하게 생각했던 부분은 <b>모든 디바이스에서 비슷한 형태의 UI</b>를 구성하자였습니다.
* 비슷한 형태의 UI디자인을 위해 가능한 디바이스 크기의 Width를 기준으로 비율로 계산하였습니다. 레이블 같은 고정된 폰트의 크기를 가지는 형태를 제외하고는 대부분 비율로 레이아웃 유지하도록 구현했습니다.

본 프로젝트는 회원가입 여부에 따라 회원 가입 화면과, 홈 화면으로 나눠집니다. 최초 실행 또는 회원 탈퇴 시에는 회원가입 화면으로 이동되며, 회원가입이 완료된 이후부터는 홈 화면으로 이동됩니다.

<b>[회원가입]</b>  
회원가입 유효성 검사는 "2글자 이상과 10글자 미만", "숫자 금지", "일부 특수문자 (#,@,$,%) 금지"가 있으며, 텍스트 필드의 델리게이트 사용하여 사용자에게 실시간으로 가입 가능 여부를 표시했습니다.
만약, 사용자가 특수문자 또는 숫자 등 금지된 항목을 입력했을 때에는 텍스트 필드의 입력이 되지 않도록 했습니다. "textFieldDidChangeSelection" 함수에서 입력이 된 이후 사용자에게 조건을 안내할 수 있었지만, 사용자가 지우기 버튼을 누르는 것보다는 시스템적으로 쓰지 못하게 막아야 한다는 생각으로, 숫자 또는 특수문자 같은 금지 항목의 입력에 대해서는 텍스트 필드에서 입력이 안되도록 막고, 사용자에게는 레이블로 안내표시를 하는 형태로 구현했습니다. (가입가능여부: 버튼이 활성화되면 가입이 가능)

<b>[홈화면]</b>  
홈 화면은 크게 3가지의 섹션으로 구분됩니다. 각각의 섹션은 프로필, 최근 검색어, 오늘의 영화(지금 가장 인기 있는 영화)로 구분되며, 프로필 섹션을 제외하고, 최근 검색어와 오늘의 영화는 스택 뷰 내의 컬렉션 뷰로 구성되어 있습니다. 최근 검색어의 영역은 높이의 큰 영향을 받지 않는다고 판단하여 고정된 높이를 설정했습니다.  
최근 검색어의 컬렉션 셀은 레이블의 크기에 맞게 셀의 크기를 동적으로 설정하기 위해 UICollectionViewDelegateFlowLayout 사용하여, Label의 크기가 정해지면 레이아웃을 다시 설정하도록 구현했습니다. 또한, 최근 검색어에서 컬렉션 셀을 누를 경우 해당 검색어의 검색 화면으로 이동합니다.

<b>[검색화면]</b>  
검색화면은 테이블 뷰기반으로 구성되어잇으며, 페이지네이션 기능을 지원합니다. 검색화면에서 검색된 내용들은 홈화면의 최근검색어의 반영됩니다.  
최근 검색어의 적용되는 기준은 다음과 같습니다  
1. 검색어를 최신순으로 적용하기 위해, 항상 최근검색어 첫번째 셀의 적용됩니다.
2. 중복으로 검색될 경우, 최근에 입력된 검색어는 최근검색어의 첫번째 셀의 적용되며, 기존 값은 삭제됩니다.  

이를 구현하기 위해, 배열의 insert를 활용하여 가장 첫 번째 Index에 값을 넣어 최근 검색어를 최신순으로 적용하고 있습니다. 중복제거를 위해서는 LastIndex를 사용하여, 마지막 인덱스부터 찾아서 동일한 값이 있을 경우 지울 수 있도록 로직을 구현했습니다. 마지막 인덱스부터 찾는 이유는, 상대적으로 앞에서 찾는 것보다 마지막에서 찾는 것이 순회를 적게 할 수 있다고 판단했기 때문입니다.

<b>[상세화면]</b>  
 
 상세화면은 BackDrop Image, Synopsis, Cast, Poster 영역으로 구분되었습니다. BackDrop은 스크롤 뷰 기반의 페이지 컨트롤을 함께 적용했습니다. 또한 BackDrop은 디바이스에 맞춰 고정된 비율을 가지고 있습니다.  
 구성에서, BackDrop 영역은 항상 고정으로 두고 싶었기에, 나머지 영역을 테이블 뷰로 구성했습니다. 테이블 뷰로 구성 시, 각 영역을 섹션으로 나눴으며, 이에 대한 이야기는 트러블 슈팅에서 자세하게 말씀드리겠습니다.  
 Synopsis 영역은 영화 줄거리를 3줄까지 보여주고 있으며, 3줄이 넘어갈 경우 More 버튼을 통해 나머지 영역을 볼 수 있습니다. 이는 TableView의 automaticDimension을 활용했습니다.  

<b>[네트워크 매니저]</b>  
네트워크 매니저는 싱글톤 패턴을 적용하여, 어느 곳에서든지 인스턴스 생성 없이 호출할 수 있도록 했습니다. 실질적인 통신을하는 callRequest 함수는 제네릭 타입으로 타입에 제한이 없이 통신을 할 수 있도록 설계하였습니다.  
네트워크 통신은 Alamofire 라이브러리를 사용했습니다. Json Parsing 및 TMDB에서 SnakeCase를 사용하고 있기에, CodingKeys를 사용하여 CamelCase로 변경하도록 구현하였습니다.  
서버로 보내는 Request는 Router Pattern을 적용하여 서버로부터 데이터를 요청하고 있습니다.
***
### 트러블 슈팅





